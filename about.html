<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±ÙƒØ² ÙÙˆØ±Ø³ - Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© */
        body {
            font-family: Arial, sans-serif;
            background: #f0f2f5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù†Ø´Ø± */
        .post-box {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .post-content textarea {
            width: 100%;
            border: none;
            resize: none;
            font-size: 16px;
            padding: 10px;
            margin-bottom: 10px;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ */
        .post-actions {
            display: flex;
            align-items: center;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            border: none;
            background: none;
            cursor: pointer;
            color: #65676b;
        }

        .action-btn:hover {
            background: #f0f2f5;
            border-radius: 8px;
        }

        /* Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
        .comments-section {
            margin-top: 15px;
            display: none;
        }

        .comment {
            display: flex;
            margin-bottom: 10px;
        }

        .comment-content {
            background: #f0f2f5;
            padding: 8px 12px;
            border-radius: 18px;
            max-width: 70%;
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
        .dropdown-menu {
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 8px 0;
            z-index: 100;
            display: none;
        }

        .dropdown-item {
            padding: 8px 16px;
            cursor: pointer;
            white-space: nowrap;
        }

        .dropdown-item:hover {
            background: #f0f2f5;
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header img {
            width: 150px;
            margin-bottom: 10px;
        }

        .about-section, .services-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .about-section h2, .services-section h2 {
            margin-top: 0;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .emoji-picker {
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 8px;
            z-index: 100;
            display: none;
        }

        .emoji-picker span {
            cursor: pointer;
            margin: 5px;
            font-size: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <div class="header">
            <img src="force.jpg" alt="Ø´Ø¹Ø§Ø± Ù…Ø±ÙƒØ² ÙÙˆØ±Ø³">
            <h1>Ù…Ø±ÙƒØ² ÙÙˆØ±Ø³ - Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ Ù„Ø´Ø±ÙƒØ© ÙŠÙ…Ù† Ø³ÙˆÙØª</h1>
            <button id="sign-in-button">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google</button>
            <div id="user-info" style="display: none;">
                <img id="user-avatar" class="user-avatar" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
                <span id="user-name"></span>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ù…Ù† Ù†Ø­Ù† -->
        <div class="about-section">
            <h2>Ù…Ù† Ù†Ø­Ù†</h2>
            <p>
                Ù†Ø­Ù† Ù…Ø±ÙƒØ² ÙÙˆØ±Ø³ØŒ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ Ù„Ø´Ø±ÙƒØ© ÙŠÙ…Ù† Ø³ÙˆÙØª ÙÙŠ Ø§Ù„ÙŠÙ…Ù†. Ù†Ù‚Ø¯Ù… Ø­Ù„ÙˆÙ„Ù‹Ø§ Ø¨Ø±Ù…Ø¬ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…Ø¤Ø³Ø³Ø§Øª.
            </p>
        </div>

        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†Ø´ÙˆØ± -->
        <div class="post-box" id="create-post">
            <div class="post-header">
                <img id="post-user-avatar" class="user-avatar" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
                <textarea placeholder="Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø«ØŸ" id="post-text"></textarea>
            </div>
            <div class="post-actions">
                <button class="action-btn" onclick="toggleMediaUpload()">
                    ğŸ“¸ ØµÙˆØ±Ø©/ÙÙŠØ¯ÙŠÙˆ
                    <input type="file" id="media-upload" hidden accept="image/*,video/*">
                </button>
                <button class="action-btn" onclick="toggleEmojiPicker()">ğŸ˜€</button>
                <button class="action-btn" onclick="publishPost()" style="margin-right: auto">Ù†Ø´Ø±</button>
            </div>
            <div class="emoji-picker" id="emoji-picker">
                <span onclick="addEmoji('ğŸ˜€')">ğŸ˜€</span>
                <span onclick="addEmoji('ğŸ˜')">ğŸ˜</span>
                <span onclick="addEmoji('ğŸ˜‚')">ğŸ˜‚</span>
                <span onclick="addEmoji('ğŸ˜¡')">ğŸ˜¡</span>
                <span onclick="addEmoji('ğŸ˜¢')">ğŸ˜¢</span>
                <span onclick="addEmoji('ğŸ‘')">ğŸ‘</span>
                <span onclick="addEmoji('ğŸ‘')">ğŸ‘</span>
                <span onclick="addEmoji('â¤ï¸')">â¤ï¸</span>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª -->
        <div id="posts-container"></div>

        <!-- Ø§Ù„ÙÙˆØªØ± -->
        <div class="footer">
            <p>Â© 2023 Ù…Ø±ÙƒØ² ÙÙˆØ±Ø³ Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        </div>
    </div>

    <script>
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const firebaseConfig = {
  apiKey: "AIzaSyCjeJXLC0KvSiAYepZ2zG1wZ7vSZCOIxP4",
  authDomain: "forcyemensoft.firebaseapp.com",
  projectId: "forcyemensoft",
  storageBucket: "forcyemensoft.firebasestorage.app",
  messagingSenderId: "700378177180",
  appId: "1:700378177180:web:333d99ec4ab89949d09759",
  measurementId: "G-Y9JN6Q17GX"
};
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
        let posts = [];
        let currentUser = null;

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google
        const signInButton = document.getElementById('sign-in-button');
        signInButton.addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).then((result) => {
                const user = result.user;
                currentUser = {
                    id: user.uid,
                    name: user.displayName,
                    avatar: user.photoURL
                };
                document.getElementById('user-info').style.display = 'flex';
                document.getElementById('user-avatar').src = currentUser.avatar;
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('post-user-avatar').src = currentUser.avatar;
                signInButton.style.display = 'none';
            }).catch((error) => {
                console.error("Error signing in with Google: ", error);
            });
        });

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯
        function publishPost() {
            if (!currentUser) {
                alert("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.");
                return;
            }

            const postText = document.getElementById('post-text').value;
            const mediaFile = document.getElementById('media-upload').files[0];
            
            const newPost = {
                author: currentUser,
                content: postText,
                media: mediaFile ? URL.createObjectURL(mediaFile) : null,
                likes: 0,
                comments: [],
                timestamp: new Date()
            };
            
            db.collection('posts').add(newPost).then(() => {
                loadPosts();
                document.getElementById('post-text').value = '';
            }).catch((error) => {
                console.error("Error adding post: ", error);
            });
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ù…Ù† Firestore
        function loadPosts() {
            db.collection('posts').orderBy('timestamp', 'desc').onSnapshot((snapshot) => {
                posts = [];
                snapshot.forEach((doc) => {
                    posts.push({ id: doc.id, ...doc.data() });
                });
                renderPosts();
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª
        function renderPosts() {
            const container = document.getElementById('posts-container');
            container.innerHTML = '';
            
            posts.forEach(post => {
                const postHTML = `
                    <div class="post-box" data-post-id="${post.id}">
                        <div class="post-header">
                            <img src="${post.author.avatar}" class="user-avatar">
                            <div>
                                <h4>${post.author.name}</h4>
                                <small>${formatTime(post.timestamp)}</small>
                            </div>
                            <div class="post-options">
                                <button onclick="showPostMenu(${post.id})">â‹®</button>
                                <div class="dropdown-menu" id="menu-${post.id}">
                                    <div class="dropdown-item" onclick="sharePost(${post.id})">Ù…Ø´Ø§Ø±ÙƒØ©</div>
                                    <div class="dropdown-item" onclick="copyPostLink(${post.id})">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</div>
                                    ${post.author.id === currentUser.id ? 
                                        `<div class="dropdown-item" onclick="deletePost(${post.id})">Ø­Ø°Ù</div>` : ''}
                                </div>
                            </div>
                        </div>
                        
                        ${post.content && `<p>${post.content}</p>`}
                        ${post.media && `<img src="${post.media}" style="max-width: 100%; border-radius: 8px; margin: 10px 0;">`}
                        
                        <div class="post-actions">
                            <button class="action-btn" onclick="likePost(${post.id})">
                                ğŸ‘ ${post.likes}
                            </button>
                            <button class="action-btn" onclick="toggleComments(${post.id})">
                                ğŸ’¬ ${post.comments.length}
                            </button>
                        </div>
                        
                        <div class="comments-section" id="comments-${post.id}">
                            ${post.comments.map(comment => `
                                <div class="comment">
                                    <img src="${comment.author.avatar}" class="user-avatar">
                                    <div class="comment-content">
                                        <b>${comment.author.name}</b>
                                        <p>${comment.content}</p>
                                        <small>${formatTime(comment.timestamp)}</small>
                                        ${comment.author.id === currentUser.id ? 
                                            `<button onclick="deleteComment(${post.id}, ${comment.id})">Ø­Ø°Ù</button>` : ''}
                                    </div>
                                </div>
                            `).join('')}
                            <div class="comment-input">
                                <input type="text" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚..." id="comment-${post.id}">
                                <button onclick="addComment(${post.id})">Ø¥Ø±Ø³Ø§Ù„</button>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += postHTML;
            });
        }

        // Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        function formatTime(date) {
            const options = { hour: 'numeric', minute: 'numeric' };
            return new Intl.DateTimeFormat('ar-EG', options).format(date);
        }

        function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            commentsSection.style.display = commentsSection.style.display === 'none' ? 'block' : 'none';
        }

        function addComment(postId) {
            const commentText = document.getElementById(`comment-${post.id}`).value;
            const post = posts.find(p => p.id === postId);
            
            post.comments.push({
                id: Date.now(),
                author: currentUser,
                content: commentText,
                timestamp: new Date()
            });
            
            renderPosts();
        }

        function deletePost(postId) {
            db.collection('posts').doc(postId).delete().then(() => {
                loadPosts();
            }).catch((error) => {
                console.error("Error deleting post: ", error);
            });
        }

        function showPostMenu(postId) {
            const menu = document.getElementById(`menu-${postId}`);
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }

        function toggleEmojiPicker() {
            const emojiPicker = document.getElementById('emoji-picker');
            emojiPicker.style.display = emojiPicker.style.display === 'block' ? 'none' : 'block';
        }

        function addEmoji(emoji) {
            const postText = document.getElementById('post-text');
            postText.value += emoji;
        }

        function toggleMediaUpload() {
            document.getElementById('media-upload').click();
        }

        function sharePost(postId) {
            const post = posts.find(p => p.id === postId);
            const shareUrl = post.link;
            const shareText = encodeURIComponent(post.content);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${shareText}`, '_blank');
        }

        function copyPostLink(postId) {
            const post = posts.find(p => p.id === postId);
            navigator.clipboard.writeText(post.link).then(() => {
                alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!");
            });
        }

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = {
                    id: user.uid,
                    name: user.displayName,
                    avatar: user.photoURL
                };
                document.getElementById('user-info').style.display = 'flex';
                document.getElementById('user-avatar').src = currentUser.avatar;
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('post-user-avatar').src = currentUser.avatar;
                signInButton.style.display = 'none';
                loadPosts();
            }
        });
    </script>
</body>
</html>
